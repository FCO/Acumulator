<html>
	<head>
		<script src="Acumulator.js"></script>
	</head>
	<body>
		<script>
			document.addEventListener("DOMContentLoaded", function() {
				window.acum = new Acumulator({
					onoff:	[
							"the_last_one",
							function(cmd) {
								console.log("callback of onoff");
								var stat = onoff.querySelector("span#status");
								if(cmd == "toggle") {
									stat.innerHTML = stat.innerHTML == "on" ? "off" : "on";
								}
							}
						],
					sum:	[
							"somatory",
							function(value) {
								var stat = sum.querySelector("span#status");
								stat.innerHTML = parseInt(stat.innerHTML) + value;
							}
						],
					vkey1:	[
							"the_last_one",
							function(value) {
								var vkey1 = document.querySelector("td#vkey1");
								vkey1.innerHTML = value;
							}
						],
					vkey2:	[
							"the_last_one",
							function(value) {
								var vkey2 = document.querySelector("td#vkey2");
								vkey2.innerHTML = value;
							}
						],
					vkey3:	[
							"the_last_one",
							function(value) {
								var vkey3 = document.querySelector("td#vkey3");
								vkey3.innerHTML = value;
							}
						],
				});
				window.acum.waiting_time = 500;
			}, false);
		</script>
		<button id="onoff" onclick="window.acum.sub(this.id).push('toggle')">
		<span id="status">off</span>
		</button>
		<button id="sum" onclick="window.acum.sub(this.id).push(1)">
		<span id="status">0</span>
		</button>
		<table>
			<tr><td>key1</td><td id="vkey1">value1</td></tr>
			<tr><td>key2</td><td id="vkey2">value2</td></tr>
			<tr><td>key3</td><td id="vkey3">value3</td></tr>
		</table>
		<form onsubmit="return false;">
			key1: <input id=vkey1 value="value1" onkeyup="window.acum.sub(this.id).push(this.value)"><br />
			key2: <input id=vkey2 value="value2" onkeyup="window.acum.sub(this.id).push(this.value)"><br />
			key3: <input id=vkey3 value="value3" onkeyup="window.acum.sub(this.id).push(this.value)"><br />
			<input type=submit>
		</form>
	</body>
</html>
